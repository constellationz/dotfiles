# Repositories can be in any of these
repdirs=(
    "$HOME/.rep"
    "$HOME/Desktop/Repositories"
    "$HOME/Desktop/rep"
    "$HOME/Repositories"
    "$HOME/rep"
)
for rep in "${repdirs[@]}"; do
    if [[ -x "$rep" ]]; then
        REPDIR="$rep"
        break
    fi
done

# Get dotfiles
if [[ -x "$REPDIR" && -x "$REPDIR/dotfiles" ]]; then
    DOTFILES="$REPDIR/dotfiles"
fi

# Add paths
PATH="$PATH:$DOTFILES/bin"
PATH="$PATH:$HOME/.bin"
PATH="$PATH:$HOME/.cargo/bin"
PATH="$PATH:$HOME/.ghcup/bin"
PATH="$PATH:$HOME/.local/bin"
PATH="$PATH:$HOME/.nix-profile/bin"
PATH="$PATH:/sbin:/usr/sbin:/usr/local/sbin"
PATH="$PATH:/usr/sbin"

# Program settings
export CARGO_TERM_COLOR=never

# If not running interactively, don't set aliases
[[ $- != *i* ]] && return

# Set PS1 (zsh specific)
PS1="%n@%m %1~ %# "

# Aliases
alias desk='cd "$HOME/Desktop"'
alias dots='cd "$DOTFILES"'
alias eza='eza --color=never'
alias ls='ls --color=never'
alias oh='o .'
alias pls='!!'
alias rm='rm -i'
alias su='su -l -c "cd $(pwd) && bash"'

# Set nvim as vi
if command -v nvim &>/dev/null; then
	alias vi='nvim'
	alias e='nvim'
fi

# On MacOS, c is pbcopy
if command -v pbcopy &>/dev/null; then
	alias c='pbcopy'
fi

# On Linux, o is xdg-open
# On MacOS, o is open
if command -v xdg-open &>/dev/null; then
	alias o='xdg-open'
elif command -v open &>/dev/null; then
	alias o='open'
fi

# Set PATH, MANPATH, etc., for Homebrew.
if [ -x /opt/homebrew/bin/brew ]; then
	eval "$(/opt/homebrew/bin/brew shellenv)"
fi

# Use zoxide
if command -v zoxide &>/dev/null; then
	eval "$(zoxide init zsh)"
fi

# Use cargo env
if [ -x $HOME/.cargo/env ]; then
	. "$HOME/.cargo/env"
fi
